<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>端API</title>
      <link rel="stylesheet" type="text/css" href="../css/api.css"/>
    <link rel="stylesheet" type="text/css" href="../css/iconfont.css"/>
    <link rel="stylesheet" type="text/css" href="../css/aui.css" />
    <link rel="stylesheet" type="text/css" href="../css/auislide.css" />
    <link rel="stylesheet" type="text/css" href="../css/style.css"/>
  <style>
        .empty{ text-align: center; padding: 120px 0; }
    </style>

    <style>
	html,body{
		color:#000;
	}
      /*新加空提示信息*/

      .m-noRecord {
        padding: .395rem 0 0;
        text-align: center;
    }

    .m-noRecord .c-icon-noRecord {
        background: url(../image/app/Loading2.gif) no-repeat;
        background-size: cover;
      width: 15rem;
      height: 10rem;
      /* margin: .485rem auto 0; */
      margin: 0 auto;
    }
	.aui-col-xs-3 {
    width: 25%;
}
    </style>
</head>
<body>
  
<div class="aui-searchbar" id="search" style="background-color:#fff;">
							    <div class="aui-searchbar-input aui-border-radius" >
							        <i class="aui-iconfont aui-icon-search"></i>

							            <input type="text" placeholder="输入影片关键词搜索,播放速度更快" id="ff-wd">

							    </div>
							    <div class="aui-btn aui-btn-info aui-btn-block" tapmode onclick="ss()" style="width:60px;height:30px;line-height:30px;margin-right:9px;">搜索</div>
							</div>

                                <div class="br"></div>
		
 <div id="aui-slide" class="fx-box">
				<div id="slidebox" class="aui-slide-wrap" style="margin: 10px;border-radius:0.5rem;box-shadow:0.1rem 0.1rem 0.4rem rgba(99, 99, 99, 0.3);">
                <!--顶部横幅未加载完成时的提示-->
                  <img id="bpic" src="../image/TV.png">
				  
                <!--顶部横幅未加载完成时的提示-->
			    </div>
				
				<div class="aui-slide-page-wrap"><!--分页容器--></div>
		  </div>
   
				  <div class="br"></div>
			<div class="list-title"  style="border-bottom:0px solid #efefef;">
					<div class="list-title-l">
					  <span style="color:#444;font-size:17px;"><i class="iconfont icon-zuirehotchunse" style="color:#ff7600;"></i>影视VIP</span>
					</div>
					
			 </div>				
								
					<section class="aui-grid aui-margin-b-15">
      <div class="aui-row" id="div_list_f"> 
							  <div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">
                    <i class="aui-iconfont"><img src="../image/default_picture/iqiyi.png"/></i>
                    <div class="aui-grid-label">爱奇艺</div>
                  </div>

                  <div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">
                  <i class="aui-iconfont"><img src="../image/default_picture/tengxun.png"/></i>
                  <div class="aui-grid-label">腾讯视频</div>
                  </div>

                  <div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">
                  <i class="aui-iconfont"><img src="../image/default_picture/youku.png"/></i>
                  <div class="aui-grid-label">优酷视频</div>
                  </div>

                  <div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">
                  <i class="aui-iconfont"><img src="../image/default_picture/souhu.png"/></i>
                  <div class="aui-grid-label">搜狐视频</div>
                  </div>

                  <div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">
                  <i class="aui-iconfont"><img src="../image/default_picture/mgtv.png"/></i>
                  <div class="aui-grid-label">芒果TV</div>
                  </div>
					  </div>

  </section>   
					
					
					
	          
			   <div  class="fx-box">
					<div id="ttu" class="aui-slide-wrap" style="margin: 10px;border-radius:0.5rem;box-shadow:0.1rem 0.1rem 0.4rem rgba(99, 99, 99, 0.3);">


								<!--底部横幅未加载完成时的提示-->
								  <img id="bpic" src="../image/default_picture/youxizhibo.png"  onClick="UnloadedCompleted()">
								<!--底部横幅未加载完成时的提示-->
					</div>
				  </div>
			  
			  
			  
			  


			
		<div class="list-title"  style="border-bottom:0px solid #efefef;">
					<div class="list-title-l">
					  <span style="color:#444;font-size:17px;"><i class="iconfont icon-zuirehotchunse" style="color:#ff7600;"></i>推荐服务</span>
					</div>
					

			 <section class="aui-grid aui-margin-b-15">
		<div class="aui-row" id="tuijian"> 
						<div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">
              
                <div class="myui-label-b">海量优惠</div>
                <i class="aui-iconfont"><img src="../image/default_picture/youhuiquan.png"/></i>
              </div>

            <div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">
               
                  <div class="myui-label-b">食为天</div>
                  <i class="aui-iconfont"><img src="../image/default_picture/ico_5.png"/></i>
                </div>

              <div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">
               
                <div class="myui-label-b">玩个够</div>
                <i class="aui-iconfont"><img src="../image/default_picture/wan.png"/></i>
              </div>
            <div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">
                
                  <div class="myui-label-b">十年少</div>
                  <i class="aui-iconfont"><img src="../image/default_picture/ico_1.png"/></i>
                </div>
			  </div>

  </section>

	

</body>

  <script type="text/javascript" src="../script/api.js"></script>
  <script type="text/javascript" src="../script/doT.js"></script>
<script type="text/javascript" src="../script/auipullrefresh.js"></script>
<script type="text/javascript" src="../script/auislide.js"></script>
<script type="text/javascript" src="../script/auilazyload.js" ></script>
  <script type="text/javascript">
  var api_url = localStorage.getItem('api_url');
      apiready = function(){
		
      
		
		getNav();
		dailitui();
		daililun();
		dailiheng();
		
			api.setCustomRefreshHeaderInfo({
				  bgColor : '#fff',
				}, function() {
              //下拉刷新被触发，自动进入加载状态，使用 api.refreshHeaderLoadDone() 手动结束加载中状态
					getNav();
					dailitui();
					daililun();
					dailiheng();  
						  setTimeout(function(){
								api.refreshHeaderLoadDone()
						  }, 3000);
					  });
				
				}
		
		
		
     
	  
	//////////////////////    菜单导航获取  方法  getBanner  S  //////////////////////
function getBanner(){
  var bannerid = $api.byId('slidebox');
  var bannertpl = $api.byId('bannertpl');
  var ttus = $api.byId('ttu');
  api.ajax({
      url: api_url+'/App/Index/zlun.html',
      method: 'get',
  },function(ret, err){
      if (ret) {
		var html='';
		
		var banner = ret.banner;
		for(i in banner){
			item = banner[i]; 
			html += "<div class='aui-slide-node bg-dark' tapmode  onclick=\"toBanner('" + item.link + "')\">";
			html += '<img src="' +item.picname+ '">';
			html += '</div>';
			}
		bannerid.innerHTML = html;
	    
        banNer(); 
      }        
  });
}


function daililun(){
  var bannerid = $api.byId('slidebox');
  var bannertpl = $api.byId('bannertpl');
  var ttus = $api.byId('ttu');
  api.ajax({
      url: api_url+'/App/Index/dailitu3.html',
      method: 'get',
	   data: {
                values: {
                 
                    uid:localStorage.getItem('user_id'),
                }
            } 
  },function(ret, err){

      if (ret.code==1) {
	  
		var html='';
		
		var banner = ret.msg;
		for(i in banner){
			item = banner[i]; 
			html += "<div class='aui-slide-node bg-dark' tapmode  onclick=\"toBanner('" + item.link + "')\">";
			html += '<img src="' +item.picname+ '">';
			html += '</div>';
			}
		bannerid.innerHTML = html;
	    
        banNer(); 
      }else{
			getBanner();
	  }        
  });
}



function getBanner1(){
  var ttus = $api.byId('ttu');
  api.ajax({
      url: api_url+'/App/Index/zlun.html',
      method: 'get',
  },function(ret, err){
      if (ret) {
		var html='';
		
		var ttu = ret.ttu;
		for(i in ttu){
			item = ttu[i]; 
			html += "<div  tapmode  onclick=\"toBanner('" + item.link + "')\">";
			html += '<img src="' +item.picname+ '" style="height:80px;">';
			html += '</div>';
			}
		ttus.innerHTML = html;
	    
   
      }     
   
  });
}


function dailiheng(){
  var ttus = $api.byId('ttu');
  api.ajax({
      url: api_url+'/App/Index/dailitu5.html',
      method: 'get',
	   data: {
                values: {
                 
                    uid:localStorage.getItem('user_id'),
                }
            } 
  },function(ret, err){
      if (ret.code==1) {
		var html='';
		
		var ttu = ret.msg;
		for(i in ttu){
			item = ttu[i]; 
			html += "<div  tapmode  onclick=\"toBanner('" + item.link + "')\">";
			html += '<img src="' +item.picname+ '" style="height:80px;">';
			html += '</div>';
			}
		ttus.innerHTML = html;
   
      }else{
		getBanner1();
	  }     
   
  });
}








  function openLive(url){
    var time = localStorage.getItem('viptime');
    var user_id = localStorage.getItem('user_id');
    var username = localStorage.getItem('user_name');
    var timestamp = Date.parse(new Date())/1000;
    if(user_id<1){
      api.toast({
          msg: '(ｷ｀ﾟДﾟ´)!!    你还没登陆！',
          duration: 5000
      });
      api.openWin({
          name: 'login',
          url: './login.html',
          delay: 2000
      });
      return;

    }

    if (time>timestamp) {
			api.ajax({
			 url: api_url+'/App/Index/config.html',
			method: 'get'
			},function(ret, err){
			if (ret) {
			 api.toast({
				 msg: 'VIP登录'
			 });
				   setTimeout("playRadio();",1000);
				   var delay = 0;
				   if(api.systemType != 'ios'){
					   delay = 300;
				   }
				   api.openWin({
					   name: 'video_win',
					   url: './video_win.html',
					   delay: 800,
					   pageParam:{url:url},
					   bgColor: 'rgba(0,0,0,0)'
				   });

			} else {

				  api.toast({
					  msg: '请检查网络是否畅通'
				  });
			}


			});
			//网络连接判断E
			}else if (time<timestamp){
				VipExpiredHint();// 会员过期弹窗提示

			}

		  }


function VipExpiredHint() {

                  /*会员过期弹窗提示*/
                  var dialogBox = api.require('dialogBox');
                  dialogBox.alert({
                      tapClose: true,  //描述：（可选项）是否点击遮罩层关闭该对话框  默认值：false
                      texts: {
                          content: '超级视频VIP已过期',
                          leftBtnTitle: '在想想',
                          rightBtnTitle: '去续费'
                      },
                      styles:{
                bg: '#fff',            //（可选项）字符串类型；对话框整体背景配置，支持#、rgb、rgba、img；默认：#fff
                corner: 10,             //（可选项）数字类型；对话框背景圆角大小；默认：2
                w: 300,                //（可选项）数字类型；对话框的宽；默认：300
                title:{                //（可选项）JSON对象；弹窗标题栏样式配置，不传则不显示标题区域
                    marginT: 20,       //（可选项）数字类型；标题栏与对话框顶端间距；默认：20
                    icon: 'widget://image/app/VipExpiredTisi.png',          //（可选项）字符串类型；标题前面的图标路径，要求本地路径（widget://、fs://）；图片为正方形的，如：50*50、100*100，建议开发者传大小合适的图片以适配高分辨率手机屏幕，不传则不显示
                    iconSize: 80,      //（可选项）数字类型；icon 图标边长大小,若 icon 不存在则此参数无效；默认：24
                    titleSize: 14,     //（可选项）数字类型；标题字体大小；默认：14
                    titleColor: '#000' //（可选项）字符串类型；标题字体颜色，支持#、rgb、rgba；默认：#fff
                },
                content:{              //（可选项）JSON 对象；文本内容配置，若不传则不显示该区域
                    marginT: 20,       //（可选项）数字类型；内容文本顶端与标题栏底端的距离，如果标题栏不存在，则是到窗口顶端的距离；默认：20
                    marginB: 40,       //（可选项）数字类型；内容文本底端与 left/right 顶端的距离，如果 left/right 都不存在，则是到对话框底端的距离；默认：20
                    color: '#ff0072',     //（可选项）字符串类型；内容文本字体颜色，支持 rgb、rgba、#；默认：#eee
                    size: 12           //（可选项）数字类型：内容文本字体大小；默认：12
                },
                left:{                 //（可选项）JSON 对象；左边按钮样式配置，不传则不显示左边按钮
                    marginB: 30,        //（可选项）数字类型；左边按钮的下边距；默认：7
                    marginL: 30,       //（可选项）数字类型；左边按钮的左边距；默认：20
                    w: 100,            //（可选项）数字类型；左边按钮的宽；默认：130
                    h: 40,             //（可选项）数字类型；左边按钮的高；默认：35
                    corner: 10,         //（可选项）数字类型；左边按钮圆角半径；默认：0.0
                    bg: '#3d3d3d',        //（可选项）字符串类型；左边按钮的背景，支持rgb、rgba、#、img；默认：'#e0e'
                    color: '#fff',  //（可选项）字符串类型；左边按钮标题字体颜色，支持rgb，rgba、#；默认：'#007FFF'
                    size: 12           //（可选项）数字类型；左边按钮标题字体大小；默认：12
                },
                right: {               //（可选项）JSON 对象；右边按钮样式配置，不传则不显示右边按钮
                    marginB: 30,        //（可选项）数字类型；右边按钮的下边距；默认：7
                    marginL: 40,      //（可选项）数字类型；右边按钮左边距；默认：10
                    w: 100,            //（可选项）数字类型；右边按钮的宽；默认：130
                    h: 40,             //（可选项）数字类型；右边按钮的高；默认：35
                    corner: 10,         //（可选项）数字类型；右边按钮圆角半径；默认：0.0
                    bg: '#ff0072',        //（可选项）字符串类型；右边按钮的背景，支持rgb、rgba、#、img；默认：'#e0e'
                    color: '#fff',  //（可选项）字符串类型；右边按钮标题字体颜色，支持rgb、rgba、#；默认：'#007FFF'
                    size: 12           //（可选项）数字类型；右边按钮标题字体大小；默认：12
                }
            }
                  }, function(ret) {
                      if (ret.eventType == 'left') {
                          var dialogBox = api.require('dialogBox');
                          dialogBox.close({
                              dialogName: 'alert'
                          });
                      }else if (ret.eventType == 'right') {
                        api.openWin({
                            name: 'open_vip_win',
                            url: './open_vip_win.html',
                            delay: 300
                        });
                        var dialogBox = api.require('dialogBox');
                        dialogBox.close({
                            dialogName: 'alert'
                        });
                      }
                  });
                  /*    会员过期弹窗提示结束    */

}









	
	  	
function getNav(){
 var navid = $api.byId('div_list_f');
 api.ajax({ 
		url: api_url+'/App/Index/navv.html',
      method: 'get',
  },function(ret, err){
      if (ret) {
		var html='';
		for(i in ret){
			item = ret[i];
		

			html += "<div class='aui-col-xs-3 pt-list' style='padding: 0.3rem 0;'  onclick=\"openLive('" + item.link + "')\">";
			html += '<i class="aui-iconfont"><img src="' +item.picname+ '"></i>';
			html +='<div class="aui-grid-label ">' + item.name + '</div>';
			html += '</div>';
			}
	  
    navid.innerHTML = html;

	}
  });

}


	
  function toBanner(url){

    if (url == '') {


      api.toast({
          msg: '暂无详情'
      });

    }else {


      //网络连接判断S


                          api.ajax({
                             url: api_url+'/App/Index/config.html',
                              method: 'get'
                          },function(ret, err){
                              if (ret) {

                                           api.toast({
                                               msg: '加载中'
                                           });



                                                 api.openWin({
                                                     name: 'h5',
                                                     url: './h5.html',
                                                     pageParam: {
                                                         url: url
                                                     }
                                                 });




                              } else {

                                          //网络连接失败 进行提示
                                        //  NetworkConnectionFailurePrompt();

                                                api.toast({
                                                    msg: '请检查网络是否畅通'
                                                });
            }


        });
  //网络连接判断E

    }
  }	
	


function getNav1(){
 var navid = $api.byId('tuijian');
 api.ajax({ 
	url: api_url+'/App/Index/navt.html',
      method: 'get',
  },function(ret, err){
      if (ret) {
		var html='';
		
			html += "<div class='aui-col-xs-3 pt-list' style='padding: 0rem 0;' onclick=\"tvList()\">";
			html += '<i class="aui-iconfont"><img src="../image/app/tv.png"></i>';
			html +='<div class="myui-label-b"style="    margin: 0rem;">直播</div>';
			html += '</div>';
		
		for(i in ret){
			item = ret[i];
			
			html += "<div class='aui-col-xs-3 pt-list' style='padding: 0rem 0;' onclick=\"toBanner('" + item.link + "')\">";
			html += '<i class="aui-iconfont"><img src="' +item.picname+ '"></i>';
			html +='<div class="myui-label-b"style="    margin: 0rem;">' + item.name + '</div>';
			html += '</div>';
			}
			navid.innerHTML = html;
	}
  });
}

function tvList(){
  var delay = 0;
  api.openWin({
      name: 'tv_list_win',
      url: 'tv_list_win.html',
      bounces:false,
      delay: delay,
      slidBackEnabled:true,
      vScrollBarEnabled:false,
  });
} 


function dailitui(){
 var navid = $api.byId('tuijian');
 api.ajax({ 
	url: api_url+'/App/Index/dailitu4.html',
      method: 'get',
	   data: {
                values: {
                 
                    uid:localStorage.getItem('user_id'),
                }
            } 
  },function(ret, err){
      if (ret.code==1) {
		var html='';

		for(i in ret.msg){
			item = ret.msg[i];
			
			html += "<li id='" + item.id + "' onclick=\"toBanner('" + item.link + "')\">";
			html += '<i class="aui-iconfont"><img src="' +item.picname+ '"></i>';
			html +='<a href="#">' + item.name + '</a>';
			html += '</li>';
			}
			navid.innerHTML = html;
	}else{
	
	getNav1();
	}
  });
}





function tvList(){
  var delay = 0;
  api.openWin({
      name: 'tv_list_win',
      url: 'tv_list_win.html',
      bounces:false,
      delay: delay,
      slidBackEnabled:true,
      vScrollBarEnabled:false,
  });
} 

function gameList(){
	var delay = 0;
	api.openWin({
			name: 'game_list_win',
			url: 'game_list_win.html',
			bounces:false,
			delay: delay,
			slidBackEnabled:true,
			vScrollBarEnabled:false,
	});
}

function girlxiezhenList(){
	var delay = 0;
	api.openWin({
			name: 'v_mn_win',
			url: 'v_mn_win.html',
			bounces:false,
			delay: delay,
			slidBackEnabled:true,
			vScrollBarEnabled:false,
	});
}

function banNer(){
  var slide = new auiSlide({
      container:document.getElementById("aui-slide"),
      // "width":300,
      "height":150,
      "speed":300,
      "pageShow":true,
      "autoPlay": 5000,
      "pageStyle":'dot',
      "loop":true,
      'dotPosition':'center',
  });
}

function ss(){

            var wd = $api.val($api.byId('ff-wd'));
			api.openWin({
          name: 'h5',
          url: './h5.html',
          pageParam: {
              url: 'http://v.pucms.com/index.php?c=search&mid=vods&keyword=' + wd + ''
            }
        });





    }
  </script>
  </html>
